---
import { SEO } from 'astro-seo'
import i18next, { t } from 'i18next'

export interface Props {
    title: string
    description: string
    image: {
        url: string
        alt: string
    }
    article?: {
        publishedTime?: string
        modifiedTime?: string
        authors: string[]
        section: string
        tags: string[]
    }
    canonical?: string
}
const { title, description, image, article, canonical } = Astro.props

const { href, origin } = Astro.url
const computedTitle = t('titleTemplate', {
    ns: 'common',
    title,
}) as string

const canonicalUrl = canonical || href
---

<SEO
    title={computedTitle}
    description={description}
    canonical={canonicalUrl}
    openGraph={{
        basic: {
            title,
            type: 'website',
            image: origin + image.url,
            url: canonicalUrl,
        },
        image: {
            alt: image.alt,
        },
        optional: {
            description,
            siteName: computedTitle,
            locale: i18next.language,
            localeAlternate: (() => {
                const alternates = [...i18next.languages]
                alternates.splice(
                    i18next.languages.indexOf(i18next.language),
                    1
                )
                return alternates
            })(),
        },
        article,
    }}
    twitter={{
        card: 'summary_large_image',
        creator: '@LfbvrFlo',
        title,
        image: origin + image.url,
        imageAlt: image.alt,
        description,
    }}
/>
